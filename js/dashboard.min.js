"use strict";angular.module("Vastrai",["ui.bootstrap","ui.router","ngCookies","chart.js","angularFileUpload","ngNotify"]),angular.module("Vastrai").factory("AuthInterceptor",["$q","$window","$location",function(e,t,o){return{request:function(e){return e.headers=e.headers||{},t.localStorage.token&&(e.headers.Authorization="Token "+t.localStorage.token),e},responseError:function(r){return 401===r.status?(t.localStorage.removeItem("token"),t.localStorage.removeItem("username"),void o.path("/")):e.reject(r)}}}]),angular.module("Vastrai").constant("API_SERVER","/");
"use strict";angular.module("Vastrai").config(["$stateProvider","$urlRouterProvider","$httpProvider",function(t,e,l){l.interceptors.push("AuthInterceptor"),e.otherwise("/"),t.state("index",{url:"/",templateUrl:"templates/dashboard.html"}).state("chart",{url:"/chart",templateUrl:"templates/chart.html"}).state("login",{url:"/login",templateUrl:"templates/login.html"}).state("register",{url:"/register",templateUrl:"templates/register.html"}).state("upload",{url:"/demo",templateUrl:"templates/upload.html"}).state("pricing",{url:"/pricing",templateUrl:"templates/pricing.html"}).state("status",{url:"/status",templateUrl:"templates/status.html"}).state("tables",{url:"/tables",templateUrl:"templates/tables.html"})}]);
"use strict";function AlertsCtrl(t,e,n,o){t.alerts=[{type:"success",msg:"Welcome to Vastrai! Check out our demo in the side panel!"}],t.stats={apitoken:"",clicks:"0",numRequests:"0",bill:"0$",averageRP:"0ms"};var r=function(){n({method:"GET",url:e+"admin/tokenStats"}).then(function(e){t.stats=e.data,console.log(e.data)},function(e){t.apiToken="Error getting token, contact admin"})};t.alertInit=function(){o.returnOnLogout(),r()},t.addAlert=function(){t.alerts.push({msg:"Another alert!"})},t.closeAlert=function(e){t.alerts.splice(e,1)}}angular.module("Vastrai").controller("AlertsCtrl",["$scope","API_SERVER","$http","$rootScope",AlertsCtrl]);
"use strict";function AuthCtrl(e,o,r,t,n,s){e.register=function(r){var a=r.email,l=r.password;a&&l?o.register(a,l).then(function(){t.set("You are successfully registered",{type:"success",position:"top"}),n.url("/"),console.log(s.localStorage.username),console.log(s.localStorage.token)},function(o){e.registerError=o,t.set(e.registerError,{type:"error",position:"top"})}):e.registerError="Username and password required"},e.login=function(r){var a=r.email,l=r.password;a&&l?o.login(a,l).then(function(){t.set("You are successfully logged in",{type:"success",position:"top"}),console.log(s.localStorage.username),console.log(s.localStorage.token),n.url("/")},function(o){e.loginError=o,t.set(e.loginError,{type:"error",position:"top"})}):e.loginError="Username and password required"},e.logout=function(){o.logout().then(function(){t.set("You are successfully logged out",{type:"success",position:"top"}),n.url("/login")},function(e){t.set("You are successfully logged out",{type:"success",position:"top"})})}}angular.module("Vastrai").factory("AuthService",["$q","$window","$location","$http","API_SERVER","ngNotify",function(e,o,r,t,n,s){var a=function(r,s,a){var l=n+a,u=e.defer();return t.post(l,"username="+r+"&password="+s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){var r=e.data.token,t=e.data.username;r&&t?(o.localStorage.token=r,o.localStorage.username=t,u.resolve(!0)):u.reject("Invalid data received from server")},function(e){u.reject(e.data.error)}),u.promise},l=function(){var r=e.defer(),s=n+"logout/";return t.post(s).then(function(){o.localStorage.removeItem("token"),o.localStorage.removeItem("username"),r.resolve()},function(e){o.localStorage.removeItem("token"),o.localStorage.removeItem("username"),r.reject(e.data.error)}),r.promise};return{register:function(e,o){return a(e,o,"register/")},login:function(e,o){return a(e,o,"login/")},logout:function(){return l()}}}]),angular.module("Vastrai").controller("AuthCtrl",["$scope","AuthService","$rootScope","ngNotify","$location","$window",AuthCtrl]);
"use strict";function ChartsCtrl(a,l,r,o){a.graphData={};var t=function(){r({method:"GET",url:o+"admin/graphStats"}).then(function(l){a.labels=l.data.labelAggregate,a.data=l.data.dataAggregate,console.log(a.labels),a.labels2=l.data.labelHour,a.data2=l.data.dataHour,a.labels1=l.data.labelDay,a.data1=l.data.dataDay,console.log(a.labels1),console.log(a.data1)},function(a){console.log("error")})};t(),a.colorScheme1=[{fillColor:"rgba(47, 132, 71, 0.4)",strokeColor:"rgba(47, 132, 71, 0.8)",highlightFill:"rgba(47, 132, 71, 0.8)",highlightStroke:"rgba(47, 132, 71, 0.8)"}],a.colorScheme2=[{fillColor:"rgba(47, 132, 71, 0.8)",strokeColor:"rgba(47, 132, 71, 0.8)",highlightFill:"rgba(47, 132, 71, 0.8)",highlightStroke:"rgba(47, 132, 71, 0.8)"}],a.colorScheme3=[{fillColor:"rgba(200, 100, 100, 0.2)",strokeColor:"rgba(200, 100, 100, 0.8)",highlightFill:"rgba(200, 100, 100, 0.8)",highlightStroke:"rgba(200, 100, 100, 0.8)"}],a.labels=["<500ms","500-1000ms","1-1.5s","1.5-2.5s","2-3s",">3s"],a.series=["Series A"],a.data=[[0,0,0,0,0,0]],a.labels2=["-47","-46","-45","-44","-43","-42","-41","-40","-39","-38","-37","-36","-35","-34","-33","-32","-31","-30","-29","-28","-27","-26","-25","-24","-23","-22","-21","-20","-19","-18","-17","-16","-15","-14","-13","-12","-11","-10","-9","-8","-7","-6","-5","-4","-3","-2","-1","now"],a.series2=["Series A"],a.data2=[[]];for(var e=0;48>e;e++)a.data2[0].push(0);a.labels1=a.labels2,a.series1=["Series A"],a.data1=a.data2,a.onClick=function(a,l){console.log(a,l)}}angular.module("Vastrai").controller("ChartsCtrl",["$scope","$timeout","$http","API_SERVER",ChartsCtrl]);
"use strict";function MasterCtrl(t,o,e,n,g){var r=992;t.getWidth=function(){return window.innerWidth},t.$watch(t.getWidth,function(e,n){e>=r?angular.isDefined(o.get("toggle"))?t.toggle=!!o.get("toggle"):t.toggle=!0:t.toggle=!1}),t.toggleSidebar=function(){t.toggle=!t.toggle,o.put("toggle",t.toggle)};var l=t.checkLogin=function(){var t;return t=!(!e.localStorage.token||""==e.localStorage.token)};n.returnOnLogout=function(){l()||g.url("/login")},n.returnOnLogin=function(){l()&&g.url("/")},window.onresize=function(){t.$apply()}}angular.module("Vastrai").controller("MasterCtrl",["$scope","$cookieStore","$window","$rootScope","$location",MasterCtrl]);
"use strict";function StatusCtrl(t,u,e,a,s){t.gpustatus=1,t.livetext="Fetching...";var n=function(){e({method:"GET",url:s+"admin/gpuStatus/"}).then(function(u){t.gpustatus=u.data.status,t.livetext="Live"},function(t){console.log("error")})};a(n,5e3)}angular.module("Vastrai").controller("statusCtrl",["$scope","$timeout","$http","$interval","API_SERVER",StatusCtrl]);
"use strict";angular.module("Vastrai").controller("TabsCtrl",[function(){this.tab=1,this.setTab=function(t){this.tab=t},this.isSet=function(t){return this.tab===t}}]);
"use strict";function UploadCrossCtrl(o,n,e,t,l,s){var r=o.uploader=new n({url:e+"admin/cross",headers:{Authorization:"Token "+t.localStorage.token}});r.filters.push({name:"customFilter",fn:function(o,n){return this.queue.length<10}}),o.clearCross=function(){o.crossData=[],o.$apply()},o.searchquery=function(n){s({method:"GET",url:e+"admin/cross?url="+n}).then(function(n){o.crossData.push(n.data)},function(o){console.log(o)})},o.crossData=[],r.onWhenAddingFileFailed=function(o,n,e){console.info("onWhenAddingFileFailed",o,n,e)},r.onAfterAddingFile=function(o){console.info("onAfterAddingFile",o)},r.onAfterAddingAll=function(o){console.info("onAfterAddingAll",o)},r.onBeforeUploadItem=function(o){console.info("onBeforeUploadItem",o)},r.onProgressItem=function(o,n){console.info("onProgressItem",o,n)},r.onProgressAll=function(o){console.info("onProgressAll",o)},r.onSuccessItem=function(o,n,e,t){console.info("onSuccessItem",o,n,e,t)},r.onErrorItem=function(o,n,e,t){console.info("onErrorItem",o,n,e,t)},r.onCancelItem=function(o,n,e,t){console.info("onCancelItem",o,n,e,t)},r.onCompleteItem=function(n,e,t,l){o.crossData.push(e)},r.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",r),console.log(l.testdata)}angular.module("Vastrai").controller("UploadCrossCtrl",["$scope","FileUploader","API_SERVER","$window","$rootScope","$http",UploadCrossCtrl]);
"use strict";function UploadNNCtrl(o,n,e,l,t,i){var r=o.uploader=new n({url:e+"admin/similar",headers:{Authorization:"Token "+l.localStorage.token}});r.filters.push({name:"customFilter",fn:function(o,n){return this.queue.length<10}}),o.clearNN=function(){o.nnData=[]},o.searchquery=function(n){i({method:"GET",url:e+"admin/similar?url="+n}).then(function(n){o.nnData.push(n.data)},function(o){console.log(o)})},o.nnData=[],r.onWhenAddingFileFailed=function(o,n,e){console.info("onWhenAddingFileFailed",o,n,e)},r.onAfterAddingFile=function(o){console.info("onAfterAddingFile",o)},r.onAfterAddingAll=function(o){console.info("onAfterAddingAll",o)},r.onBeforeUploadItem=function(o){console.info("onBeforeUploadItem",o)},r.onProgressItem=function(o,n){console.info("onProgressItem",o,n)},r.onProgressAll=function(o){console.info("onProgressAll",o)},r.onSuccessItem=function(o,n,e,l){console.info("onSuccessItem",o,n,e,l)},r.onErrorItem=function(o,n,e,l){console.info("onErrorItem",o,n,e,l)},r.onCancelItem=function(o,n,e,l){console.info("onCancelItem",o,n,e,l)},r.onCompleteItem=function(n,e,l,t){o.nnData.push(e),console.log(e)},r.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",r),console.log(t.testdata)}angular.module("Vastrai").controller("UploadNNCtrl",["$scope","FileUploader","API_SERVER","$window","$rootScope","$http",UploadNNCtrl]);
"use strict";angular.module("Vastrai").service("UploadService",[function(){}]);
"use strict";function UploadTagsCtrl(o,n,e,t,l,i){var a=o.uploader=new n({url:e+"admin/tags",headers:{Authorization:"Token "+t.localStorage.token}});a.filters.push({name:"customFilter",fn:function(o,n){return this.queue.length<10}}),o.clearTags=function(){o.tagsData=[],o.$apply()},o.searchquery=function(n){i({method:"GET",url:e+"admin/tags?url="+n}).then(function(n){o.tagsData.push(n.data)},function(o){console.log(o)})},o.tagsData=[],a.onWhenAddingFileFailed=function(o,n,e){console.info("onWhenAddingFileFailed",o,n,e)},a.onAfterAddingFile=function(o){console.info("onAfterAddingFile",o)},a.onAfterAddingAll=function(o){console.info("onAfterAddingAll",o)},a.onBeforeUploadItem=function(o){console.info("onBeforeUploadItem",o)},a.onProgressItem=function(o,n){console.info("onProgressItem",o,n)},a.onProgressAll=function(o){console.info("onProgressAll",o)},a.onSuccessItem=function(o,n,e,t){console.info("onSuccessItem",o,n,e,t)},a.onErrorItem=function(o,n,e,t){console.info("onErrorItem",o,n,e,t)},a.onCancelItem=function(o,n,e,t){console.info("onCancelItem",o,n,e,t)},a.onCompleteItem=function(n,e,t,l){o.tagsData.push(e)},a.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",a),console.log(l.testdata)}angular.module("Vastrai").controller("UploadTagsCtrl",["$scope","FileUploader","API_SERVER","$window","$rootScope","$http",UploadTagsCtrl]);
"use strict";function rdLoading(){var d={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return d}angular.module("Vastrai").directive("rdLoading",rdLoading);
"use strict";function rdWidgetBody(){var d={requires:"^rdWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return d}angular.module("Vastrai").directive("rdWidgetBody",rdWidgetBody);
"use strict";function rdWidgetFooter(){var e={requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("Vastrai").directive("rdWidgetFooter",rdWidgetFooter);
"use strict";function rdWidgetTitle(){var i={requires:"^rdWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-4" ng-transclude></div></div></div>',restrict:"E"};return i}angular.module("Vastrai").directive("rdWidgetHeader",rdWidgetTitle);
"use strict";function rdWidget(){var t={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return t}angular.module("Vastrai").directive("rdWidget",rdWidget);